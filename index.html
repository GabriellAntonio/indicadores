<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SYSMAR - Painel de Metas 2025</title>

    <link rel="icon" href="./favicon.ico">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        body { background-color: #f8fafc; }
        /* Ajuste para barra de rolagem */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Componente para Ícones Lucide
        const Icon = ({ name, className }) => {
            const iconName = name || 'Circle'; 
            
            useEffect(() => {
                if (window.lucide) {
                    window.lucide.createIcons();
                }
            }, [name]); // Re-executa quando o nome do ícone muda

            // Converte PascalCase para kebab-case (ex: MapPinned -> map-pinned)
            const kebabName = iconName.replace(/([a-z0-9])([A-Z])/g, '$1-$2').toLowerCase();

            return <i data-lucide={kebabName} className={className}></i>;
        };

        // --- DADOS INDICADORES CADASTRO & ACS (NT 30/2025) ---
        const acsIndicators = [
          {
            id: "CAD1",
            code: "Peso do Cadastro",
            title: "Qualidade do Cadastro",
            iconName: "MapPinned",
            category: "Cadastro",
            targetDescription: "Peso 1.5 (Completo)",
            unit: "pontos/pessoa",
            description: "Define o peso da pessoa no cálculo do financiamento baseado na completude do cadastro.",
            requirements: [
              { title: "Peso 1.5 (Máximo)", text: "Cidadão com Cadastro Individual (CPF/CNS) + Cadastro Domiciliar vinculados." },
              { title: "Peso 0.75 (Parcial)", text: "Cidadão apenas com Cadastro Individual (sem vínculo domiciliar)." },
              { title: "Inválido", text: "Cadastros simplificados/rápidos não contam para o indicador." }
            ],
            technicalDetails: {
              procedures: [
                "Realizar Cadastro Domiciliar (Vincular imóvel ao território)",
                "Realizar Cadastro Individual (Vincular cidadão ao imóvel)",
                "Vincular Responsável Familiar"
              ],
              cbos: [
                "Agente Comunitário de Saúde - ACS (5151)",
                "Agente de Combate a Endemias - ACE (CBO 5151-F1 - se integrado)",
                "Enfermeiro/Médico (Para Cadastro Individual apenas)"
              ],
              forms: [
                "Ficha de Cadastro Domiciliar e Territorial (e-SUS)",
                "Ficha de Cadastro Individual (e-SUS)"
              ]
            }
          },
          {
            id: "CAD2",
            code: "Validade",
            title: "Atualização e Desempate",
            iconName: "ClipboardCheck",
            category: "Cadastro",
            targetDescription: "24 Meses",
            unit: "validade",
            description: "Regras de saneamento, validade temporal e critérios de disputa de vínculo entre equipes.",
            requirements: [
              { title: "Regra dos 2 Anos", text: "Cadastros não atualizados há mais de 24 meses são desconsiderados." },
              { title: "Saneamento", text: "Cadastros marcados como 'Mudança de Território' ou 'Óbito' não contam." },
              { title: "Desempate de Vínculo", text: "Se o cidadão for atendido por mais de uma equipe, o vínculo fica com quem tiver (nesta ordem): 1º Mais atendimentos no ano; 2º Atendimento mais recente; 3º Cadastro mais recente." }
            ],
            technicalDetails: {
              procedures: [
                "Visita Domiciliar para atualização de dados",
                "Edição de cadastro no atendimento na unidade (Recepção/Consultório)"
              ],
              cbos: [
                "Agente Comunitário de Saúde - ACS (Visita)",
                "Qualquer profissional da equipe (Na unidade)"
              ],
              forms: [
                "Ficha de Visita Domiciliar (Campo: Motivo da Visita -> Atualização Cadastral)",
                "Ficha de Cadastro Individual (Editar e Salvar)"
              ]
            }
          },
          {
            id: "VINC1",
            code: "Vínculo",
            title: "Acompanhamento (Vínculo)",
            iconName: "Users",
            category: "Acompanhamento",
            targetDescription: "Peso até 2.5",
            unit: "ponderação",
            description: "Antiga 'Capitação Ponderada'. Define quanto vale cada pessoa acompanhada baseada na vulnerabilidade.",
            requirements: [
              { title: "Regra de Ouro", text: "Para validar o vínculo, é necessário ter 2 contatos no ano, sendo OBRIGATÓRIO que pelo menos 1 seja uma 'Prática de Cuidado' (Consulta, Visita, Grupo, Odonto ou Consumo Alimentar)." },
              { title: "Combinações Válidas", text: "1 Prática + 1 Procedimento (ex: Consulta + Vacina) OU 2 Práticas (ex: Consulta + Visita)." },
              { title: "Combinação Inválida", text: "Apenas 2 Procedimentos (ex: Vacina + Curativo) NÃO geram vínculo." },
              { title: "Pesos", text: "Base (1.0), Criança/Idoso (1.2), Bolsa Família/BPC (1.3), Criança/Idoso + Benefício (2.5)." }
            ],
            technicalDetails: {
              procedures: [
                "Práticas de Cuidado (Obrigatório pelo menos 1): Consulta Médica/Enf/Odonto, Visita Domiciliar, Atividade Coletiva, Marcadores de Consumo Alimentar.",
                "Procedimentos (Serve como 2º contato): Vacinação, Aferição de PA, Curativo, Medição de Peso/Altura."
              ],
              cbos: [
                "Médicos, Enfermeiros, Dentistas",
                "Técnicos de Enfermagem / Saúde Bucal",
                "ACS (Visita conta como Prática de Cuidado)"
              ],
              forms: [
                "MIAI, MIAOI, MIAC (Coletiva)",
                "Ficha de Marcadores de Consumo Alimentar",
                "Ficha de Visita Domiciliar (MIVDT)",
                "Ficha de Procedimentos / Vacinação"
              ]
            }
          },
          {
            id: "VINC2",
            code: "Satisfação",
            title: "Avaliação do Usuário",
            iconName: "UserCheck",
            category: "Acompanhamento",
            targetDescription: "+ 0.30 pts",
            unit: "bônus",
            description: "Pontuação extra baseada na avaliação do atendimento pelo cidadão no app 'Meu SUS Digital'.",
            requirements: [
              { title: "Bônus Pequeno (+0.15)", text: "Se menos de 5% dos atendimentos forem avaliados." },
              { title: "Bônus Máximo (+0.30)", text: "Se 5% ou mais dos atendimentos da equipe forem avaliados." },
              { title: "Nota", text: "Não importa se a avaliação é positiva ou negativa, apenas se foi feita." }
            ],
            technicalDetails: {
              procedures: [
                "Incentivar o usuário a baixar o app 'Meu SUS Digital'",
                "Avaliar o atendimento após a consulta/visita"
              ],
              cbos: [
                "Todos os profissionais da equipe (Divulgação)"
              ],
              forms: [
                "Aplicativo 'Meu SUS Digital' (Cidadão)"
              ]
            }
          }
        ];

        // --- DADOS INDICADORES EMULTI (M1, M2) ---
        const eMultiIndicators = [
          {
            id: "M1",
            code: "M1",
            title: "Média de Atendimentos eMulti",
            iconName: "Activity",
            category: "Acesso eMulti",
            targetDescription: "Maior que 3,0",
            unit: "atend/pessoa",
            description: "Mensura a média de atendimentos por pessoa realizados pela equipe Multiprofissional.",
            requirements: [
              { title: "Meta", text: "Garantir que a equipe realize um volume adequado de atendimentos em relação à população assistida." },
              { title: "Regra", text: "Evitar duplicidade: Se o mesmo paciente for atendido 2x no mesmo dia pelo mesmo profissional, conta só 1." }
            ],
            technicalDetails: {
              procedures: [
                "Atendimento Individual (Presencial, Domiciliar ou Remoto)",
                "Atividade Coletiva (Educação em Saúde, Grupo, Práticas Corporais)",
                "Atendimentos Compartilhados (contam para cada profissional)"
              ],
              cbos: [
                "Nutricionista (2237)", "Fisioterapeuta (2236)", "Psicólogo (2515)", 
                "Assistente Social (2516)", "Fonoaudiólogo (2238)", "Farmacêutico (2234)", 
                "Terapeuta Ocupacional (2239)", "Prof. Ed. Física (2241)", "Arte Educador (5153)", 
                "Sanitarista (1312)", "Médicos Especialistas (Cardio, Dermato, Psiquiatra, etc)"
              ],
              forms: [
                "Ficha de Atendimento Individual (e-SUS)",
                "Ficha de Atividade Coletiva (e-SUS)"
              ]
            }
          },
          {
            id: "M2",
            code: "M2",
            title: "Ações Interprofissionais",
            iconName: "Users",
            category: "Trabalho Colaborativo",
            targetDescription: "Maior que 5%",
            unit: "% ações",
            description: "Proporção de ações realizadas de forma compartilhada (matriciamento, consultas conjuntas).",
            requirements: [
              { title: "Regra de Ouro", text: "Ação deve ter SIMULTANEAMENTE no mínimo 2 profissionais de CNS diferentes." },
              { title: "Obrigatório", text: "Pelo menos 1 dos profissionais DEVE ser da eMulti (CBO listado)." }
            ],
            technicalDetails: {
              procedures: [
                "Consulta Compartilhada (2 profissionais ao mesmo tempo)",
                "Atividade Coletiva com tema 'Discussão de Caso/Projeto Terapêutico Singular (PTS)'",
                "Reunião de Matriciamento entre equipes",
                "Resposta a solicitação de interconsulta no PEC (Módulo Compartilhamento)"
              ],
              cbos: [
                "Obrigatório: 1 Profissional eMulti (Nutri, Psico, Fisio, etc)",
                "+",
                "1 Profissional de qualquer equipe (Médico, Enf, Dentista, ACS, Tec. Enf)"
              ],
              forms: [
                "Ficha de Atendimento Individual (Adicionar profissional participante)",
                "Ficha de Atividade Coletiva (Marcar tema: Discussão de Caso/PTS - Cód 05)",
                "Prontuário Eletrônico (PEC) - Módulo Compartilhamento de Cuidado"
              ]
            }
          }
        ];

        // --- DADOS INDICADORES APS (C1 a C7) - ATUALIZADO COM NOTAS METODOLÓGICAS ---
        const apsIndicators = [
          {
            id: "C1",
            code: "C1",
            title: "Mais Acesso à APS",
            iconName: "Accessibility",
            category: "Acesso",
            targetDescription: "> 50%",
            description: "Percentual de atendimentos de demanda programada em relação ao total.",
            requirements: [
              { title: "Numerador", text: "Atendimentos de demanda programada (Consulta agendada, Cuidado continuado)." },
              { title: "Denominador", text: "Total de atendimentos (Programados + Espontâneos)." },
              { title: "Objetivo", text: "Equilibrar a oferta entre urgências e cuidado continuado/preventivo." }
            ],
            technicalDetails: {
              procedures: [
                "Consulta Agendada Programada",
                "Cuidado Continuado/Programado"
              ],
              cbos: [
                "Médico da Estratégia de Saúde da Família (2251)",
                "Enfermeiro da Estratégia de Saúde da Família (2235)"
              ],
              forms: [
                "Ficha de Atendimento Individual (Campo: Tipo de Atendimento)"
              ]
            }
          },
          {
            id: "C2",
            code: "C2",
            title: "Desenvolvimento Infantil",
            iconName: "Baby",
            category: "Saúde da Criança",
            targetDescription: "> 75%",
            description: "Monitoramento integral de crianças até 2 anos.",
            requirements: [
              { title: "Boas Práticas (A-E)", text: "Acumular pontos por práticas realizadas." },
              { title: "Consultas (B)", text: "Pelo menos 9 consultas (Méd/Enf) até 2 anos." },
              { title: "Peso e Altura (C)", text: "Pelo menos 9 registros simultâneos de peso/altura até 2 anos." },
              { title: "Visitas Domiciliares (D)", text: "2 Visitas obrigatórias: 1ª até 30 dias e 2ª até 6 meses." },
              { title: "Vacinação (E)", text: "Penta, Pólio (VIP), Pneumo 10, SCR (Doses do esquema primário)." }
            ],
            technicalDetails: {
              procedures: [
                "Consulta de Puericultura (03.01.01.007-2)",
                "Avaliação Antropométrica (01.01.04.002-4)",
                "Visita Domiciliar ACS (Motivo: Recém-nascido ou Criança)"
              ],
              cbos: [
                "Médico / Enfermeiro (Consultas)",
                "Técnico de Enfermagem (Vacinas)",
                "ACS (Visitas)"
              ],
              forms: [
                "Ficha de Atendimento Individual (MIAI)",
                "Ficha de Vacinação (MIV)",
                "Ficha de Visita Domiciliar (MIVDT)"
              ]
            }
          },
          {
            id: "C3",
            code: "C3",
            title: "Gestação e Puerpério",
            iconName: "HeartPulse",
            category: "Saúde da Mulher",
            targetDescription: "> 75%",
            description: "Cuidado longitudinal da gestante e puérpera (11 Boas Práticas - A a K).",
            requirements: [
              { title: "Consultas (A, B, I)", text: "1ª até 12ª semana + 7 durante gestação + 1 Puerperal." },
              { title: "Monitoramento (C, D)", text: "7 aferições de PA + 7 registros de Peso/Altura na gestação." },
              { title: "Visitas ACS (E, J)", text: "3 visitas durante a gestação + 1 visita no puerpério." },
              { title: "Prevenção (F)", text: "Vacina dTpa a partir da 20ª semana." },
              { title: "Exames (G, H)", text: "Sífilis/HIV/HepB/HepC (1º tri) + Sífilis/HIV (3º tri)." },
              { title: "Odonto (K)", text: "1 consulta odontológica na gestação." }
            ],
            technicalDetails: {
              procedures: [
                "Consulta Pré-natal e Puerperal",
                "Testes Rápidos (Sífilis, HIV, Hep B/C)",
                "Vacina dTpa adulto",
                "Atendimento Odontológico"
              ],
              cbos: [
                "Médico / Enfermeiro",
                "Cirurgião-Dentista",
                "ACS (Visitas)"
              ],
              forms: [
                "MIAI", "MIAOI", "Ficha de Procedimentos", "Ficha de Vacinação"
              ]
            }
          },
          {
            id: "C4",
            code: "C4",
            title: "Cuidado com Diabetes",
            iconName: "Stethoscope",
            category: "Crônicas",
            targetDescription: "> 75%",
            description: "Acompanhamento de pessoas com Diabetes (6 Boas Práticas).",
            requirements: [
              { title: "Consultas (A)", text: "1 consulta (Méd/Enf) no semestre." },
              { title: "Pressão Arterial (B)", text: "1 aferição de PA no semestre." },
              { title: "Anual (C, E, F)", text: "1 Peso/Altura + 1 Hemoglobina Glicada + 1 Exame dos Pés (últimos 12 meses)." },
              { title: "Visitas (D)", text: "2 Visitas Domiciliares (ACS) nos últimos 12 meses (intervalo mín. 30 dias)." }
            ],
            technicalDetails: {
              procedures: [
                "Consulta Médica/Enfermagem",
                "Solicitação de HbA1c (02.02.01.050-3)",
                "Avaliação de Pé Diabético (03.01.04.009-5)",
                "Aferição de PA"
              ],
              cbos: [
                "Médico / Enfermeiro",
                "Técnico de Enfermagem (PA/Antropometria)",
                "ACS (Visitas)"
              ],
              forms: [
                "MIAI", "Ficha de Procedimentos"
              ]
            }
          },
          {
            id: "C5",
            code: "C5",
            title: "Cuidado com Hipertensão",
            iconName: "Stethoscope",
            category: "Crônicas",
            targetDescription: "> 75%",
            description: "Acompanhamento de pessoas com Hipertensão (4 Boas Práticas).",
            requirements: [
              { title: "Semestral (A, B)", text: "1 consulta (Méd/Enf) + 1 Aferição de PA." },
              { title: "Anual (C)", text: "1 registro de Peso e Altura nos últimos 12 meses." },
              { title: "Visitas (D)", text: "2 Visitas Domiciliares (ACS) nos últimos 12 meses (intervalo mín. 30 dias)." }
            ],
            technicalDetails: {
              procedures: [
                "Consulta Médica/Enfermagem",
                "Aferição de Pressão Arterial (03.01.10.003-9)",
                "Avaliação Antropométrica"
              ],
              cbos: [
                "Médico / Enfermeiro",
                "Técnico de Enfermagem",
                "ACS (Visitas)"
              ],
              forms: [
                "MIAI", "Ficha de Procedimentos"
              ]
            }
          },
          {
            id: "C6",
            code: "C6",
            title: "Cuidado da Pessoa Idosa",
            iconName: "Users",
            category: "Idosos",
            targetDescription: "> 75%",
            description: "Atenção integral à saúde da pessoa com 60 anos ou mais (4 Boas Práticas).",
            requirements: [
              { title: "Consulta (A)", text: "1 consulta (Méd/Enf) nos últimos 12 meses." },
              { title: "Antropometria (B)", text: "1 registro simultâneo de Peso e Altura nos últimos 12 meses." },
              { title: "Visitas (C)", text: "2 Visitas Domiciliares (ACS) nos últimos 12 meses (intervalo mín. 30 dias)." },
              { title: "Vacinação (D)", text: "1 dose de vacina Influenza (Gripe) nos últimos 12 meses." }
            ],
            technicalDetails: {
              procedures: [
                "Consulta Médica/Enfermagem",
                "Vacinação Influenza (33 ou 77)",
                "Medição de Peso e Altura"
              ],
              cbos: [
                "Médico / Enfermeiro",
                "Técnico de Enfermagem",
                "ACS"
              ],
              forms: [
                "Ficha de Vacinação", "MIAI", "Ficha de Procedimentos"
              ]
            }
          },
          {
            id: "C7",
            code: "C7",
            title: "Prevenção do Câncer",
            iconName: "ShieldPlus",
            category: "Saúde da Mulher",
            targetDescription: "> 75%",
            description: "Rastreamento de câncer e saúde sexual (Mulheres e Homens Transgênero).",
            requirements: [
              { title: "Colo do Útero (A)", text: "Citopatológico (25-64 anos) a cada 36 meses." },
              { title: "Mama (D)", text: "Mamografia (50-69 anos) a cada 24 meses." },
              { title: "Vacina HPV (B)", text: "1 dose para meninas de 9 a 14 anos." },
              { title: "Saúde Sexual (C)", text: "1 atendimento sobre saúde sexual/reprodutiva (14-69 anos) nos últimos 12 meses." }
            ],
            technicalDetails: {
              procedures: [
                "Coleta de Citopatológico (02.01.02.003-3)",
                "Mamografia Bilateral (02.04.03.018-8)",
                "Vacina HPV (67 ou 93)",
                "Atendimento Saúde Sexual (CID/CIAP específico)"
              ],
              cbos: [
                "Enfermeiro / Médico",
                "Equipe Multi (para saúde sexual)"
              ],
              forms: [
                "MIAI", "Ficha de Procedimentos", "Ficha de Vacinação"
              ]
            }
          }
        ];

        // --- DADOS INDICADORES SAÚDE BUCAL (B1 a B6) ---
        const oralHealthIndicators = [
          {
            id: "B1",
            code: "B1",
            title: "Primeira Consulta Programada",
            iconName: "Smile",
            category: "Acesso",
            targetDescription: "> 5%",
            unit: "% cobertura",
            description: "Cobertura de primeira consulta odontológica programática em relação à população adscrita.",
            requirements: [
              { title: "Numerador", text: "Pessoas com 1ª consulta programática (Cód 03.01.01.015-3)." },
              { title: "Regra", text: "Usuário contabilizado apenas 1 vez a cada 12 meses para o mesmo dentista." }
            ],
            technicalDetails: {
              procedures: ["03.01.01.015-3 - Primeira Consulta Odontológica Programática"],
              cbos: [
                "Cirurgião-Dentista ESF (2232-93)", 
                "Cirurgião-Dentista Clínico Geral (2232-08)",
                "Cirurgião-Dentista Saúde Coletiva (2232-72)"
              ],
              forms: ["Ficha de Atendimento Odontológico Individual (MIAOI) -> Campo: Tipo de Consulta"]
            }
          },
          {
            id: "B2",
            code: "B2",
            title: "Tratamento Concluído",
            iconName: "Smile",
            category: "Resolutividade",
            targetDescription: "> 75%",
            unit: "% conclusão",
            description: "Percentual de tratamentos concluídos em relação às primeiras consultas programáticas.",
            requirements: [
              { title: "Numerador", text: "Pessoas com tratamento concluído (Conduta: Tratamento Concluído)." },
              { title: "Denominador", text: "Total de primeiras consultas odontológicas programáticas." }
            ],
            technicalDetails: {
              procedures: ["Registro de fim de tratamento no plano terapêutico"],
              cbos: ["Cirurgião-Dentista (2232-93, 2232-08, 2232-72)"],
              forms: ["MIAOI -> Campo Conduta: Selecionar 'Tratamento Concluído'"]
            }
          },
          {
            id: "B3",
            code: "B3",
            title: "Taxa de Exodontia",
            iconName: "Smile",
            category: "Curativo",
            targetDescription: "8% a 10%",
            unit: "% exodontias",
            description: "Proporção de extrações dentárias em relação ao total de procedimentos individuais.",
            requirements: [
              { title: "Numerador", text: "Exodontias de dentes permanentes (simples ou com alveoloplastia)." },
              { title: "Denominador", text: "Total de procedimentos preventivos + curativos + exodontias." }
            ],
            technicalDetails: {
              procedures: [
                "04.14.02.013-8 - Exodontia de dente permanente",
                "04.14.02.014-6 - Exodontia múltipla com alveoloplastia por sextante"
              ],
              cbos: ["Cirurgião-Dentista (2232)"],
              forms: ["MIAOI -> Adicionar procedimento pelo código SIGTAP"]
            }
          },
          {
            id: "B4",
            code: "B4",
            title: "Escovação Supervisionada",
            iconName: "Smile",
            category: "Coletivo",
            targetDescription: "> 100%",
            unit: "cobertura",
            description: "Proporção de crianças (6-12 anos) beneficiadas com escovação supervisionada.",
            requirements: [
              { title: "Público", text: "Crianças de 6 a 12 anos vinculadas à equipe." },
              { title: "Ação", text: "Ação Coletiva de Escovação Dental Supervisionada." }
            ],
            technicalDetails: {
              procedures: ["01.01.02.003-1 - Ação Coletiva de Escovação Dental Supervisionada"],
              cbos: [
                "Cirurgião-Dentista (2232)",
                "Técnico em Saúde Bucal - TSB (3224-05, 3224-25)",
                "Auxiliar em Saúde Bucal - ASB (3224-15, 3224-30)"
              ],
              forms: ["Ficha de Atividade Coletiva -> Tipo: Educação em Saúde -> Prática: Escovação Dental Supervisionada"]
            }
          },
          {
            id: "B5",
            code: "B5",
            title: "Procedimentos Preventivos",
            iconName: "Smile",
            category: "Preventivo",
            targetDescription: "80% a 85%",
            unit: "% preventivos",
            description: "Proporção de procedimentos preventivos individuais em relação ao total de procedimentos.",
            requirements: [
              { title: "Numerador", text: "Ações como selante, flúor, evidenciação de placa, orientação de higiene." },
              { title: "Meta", text: "Foco na prevenção. Parâmetro Ótimo entre 80% e 85%." }
            ],
            technicalDetails: {
              procedures: [
                "01.01.02.006-6 - Aplicação de selante",
                "01.01.02.007-4 - Aplicação tópica de flúor",
                "01.01.02.008-2 - Evidenciação de placa bacteriana",
                "01.01.02.010-4 - Orientação de higiene bucal",
                "01.01.02.005-8 - Aplicação de cariostático",
                "01.01.02.009-0 - Selamento provisório"
              ],
              cbos: ["Cirurgião-Dentista (2232)", "Técnico em Saúde Bucal (3224)"],
              forms: ["MIAOI -> Registro de Procedimentos"]
            }
          },
          {
            id: "B6",
            code: "B6",
            title: "Tratamento Restaurador (ART)",
            iconName: "Smile",
            category: "Curativo",
            targetDescription: "> 8%",
            unit: "% ART",
            description: "Proporção de Tratamento Restaurador Atraumático (ART) em relação aos procedimentos restauradores.",
            requirements: [
              { title: "Técnica", text: "Minimamente invasiva, sem uso de 'motorzinho', usando ionômero de vidro." },
              { title: "Numerador", text: "Procedimentos de ART (Cód 03.07.01.007-4)." }
            ],
            technicalDetails: {
              procedures: ["03.07.01.007-4 - Tratamento Restaurador Atraumático (TRA/ART)"],
              cbos: ["Cirurgião-Dentista (2232)"],
              forms: ["MIAOI -> Adicionar procedimento"]
            }
          }
        ];

        const App = () => {
          const [activeTab, setActiveTab] = useState("APS");
          const [selectedCategory, setSelectedCategory] = useState("Todos");
          const [searchTerm, setSearchTerm] = useState("");

          let currentIndicators = [];
          let headerTitle = "";
          let headerSubtitle = "";
          let headerIconName = "Activity";
          let headerColorClass = "bg-blue-100 text-blue-600";

          switch(activeTab) {
            case "APS":
              currentIndicators = apsIndicators;
              headerTitle = "Atenção Primária";
              headerSubtitle = "Indicadores de Desempenho (C1-C7)";
              headerIconName = "Users";
              headerColorClass = "bg-blue-100 text-blue-600";
              break;
            case "eMulti":
              currentIndicators = eMultiIndicators;
              headerTitle = "Equipe eMulti";
              headerSubtitle = "Indicadores Multiprofissionais (M1-M2)";
              headerIconName = "ListChecks";
              headerColorClass = "bg-purple-100 text-purple-600";
              break;
            case "Bucal":
              currentIndicators = oralHealthIndicators;
              headerTitle = "Saúde Bucal";
              headerSubtitle = "Indicadores Odontológicos (B1-B6)";
              headerIconName = "Smile";
              headerColorClass = "bg-teal-100 text-teal-600";
              break;
            case "ACS":
              currentIndicators = acsIndicators;
              headerTitle = "Cadastro & ACS";
              headerSubtitle = "Vínculo e Território (Nota Técnica 30/2025)";
              headerIconName = "MapPinned";
              headerColorClass = "bg-orange-100 text-orange-600";
              break;
            default:
              currentIndicators = apsIndicators;
          }
          
          const categories = ["Todos", ...new Set(currentIndicators.map(i => i.category))];
          
          // Lógica de Filtro Atualizada (Categoria + Busca por Texto)
          const filteredIndicators = currentIndicators.filter(indicator => {
            const matchesCategory = selectedCategory === "Todos" || indicator.category === selectedCategory;
            const searchLower = searchTerm.toLowerCase();
            const matchesSearch = 
                indicator.title.toLowerCase().includes(searchLower) || 
                indicator.code.toLowerCase().includes(searchLower) || 
                (indicator.description && indicator.description.toLowerCase().includes(searchLower)) ||
                // Search in requirements
                (indicator.requirements && indicator.requirements.some(req => 
                    req.title.toLowerCase().includes(searchLower) || 
                    req.text.toLowerCase().includes(searchLower)
                )) ||
                // Search in technicalDetails
                (indicator.technicalDetails && (
                    indicator.technicalDetails.procedures.some(p => p.toLowerCase().includes(searchLower)) ||
                    indicator.technicalDetails.cbos.some(c => c.toLowerCase().includes(searchLower)) ||
                    indicator.technicalDetails.forms.some(f => f.toLowerCase().includes(searchLower))
                ));

            return matchesCategory && matchesSearch;
          });

          return (
            <div className="flex min-h-screen font-sans text-slate-800">
              
              {/* Sidebar de Navegação */}
              <aside className="w-64 bg-slate-900 text-white flex-shrink-0 hidden md:flex flex-col">
                <div className="p-6 border-b border-slate-800">
                  <h1 className="text-xl font-bold flex items-center gap-2">
                    <Icon name="Activity" className="w-8 h-8 text-indigo-400" />
                    SYSMAR      
                  </h1>
                  <p className="text-xs text-slate-400 mt-1">Painel de Metas 2025</p>
                </div>

                <nav className="p-4 space-y-2 flex-1">
                  <div className="text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 px-2">
                    Módulos de Gestão
                  </div>
                  
                  <button 
                    onClick={() => {setActiveTab("APS"); setSelectedCategory("Todos"); setSearchTerm("");}}
                    className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${
                      activeTab === "APS" 
                      ? "bg-indigo-600 text-white shadow-lg shadow-indigo-900/50" 
                      : "text-slate-400 hover:bg-slate-800 hover:text-white"
                    }`}
                  >
                    <i className="fa-solid fa-house-medical w-5 h-5 flex items-center justify-center"></i>
                    <span className="font-medium">Atenção Primária</span>
                  </button>

                  <button 
                    onClick={() => {setActiveTab("ACS"); setSelectedCategory("Todos"); setSearchTerm("");}}
                    className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${
                      activeTab === "ACS" 
                      ? "bg-orange-600 text-white shadow-lg shadow-orange-900/50" 
                      : "text-slate-400 hover:bg-slate-800 hover:text-white"
                    }`}
                  >
                    <i className="fa-solid fa-house-medical-circle-check w-5 h-5 flex items-center justify-center"></i>
                    <span className="font-medium">Cadastro & ACS</span>
                  </button>

                  <button 
                    onClick={() => {setActiveTab("eMulti"); setSelectedCategory("Todos"); setSearchTerm("");}}
                    className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${
                      activeTab === "eMulti" 
                      ? "bg-purple-600 text-white shadow-lg shadow-purple-900/50" 
                      : "text-slate-400 hover:bg-slate-800 hover:text-white"
                    }`}
                  >
                    <i className="fa-solid fa-people-line w-5 h-5 flex items-center justify-center"></i>
                    <span className="font-medium">Equipe eMulti</span>
                  </button>

                  <button 
                    onClick={() => {setActiveTab("Bucal"); setSelectedCategory("Todos"); setSearchTerm("");}}
                    className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${
                      activeTab === "Bucal" 
                      ? "bg-teal-600 text-white shadow-lg shadow-teal-900/50" 
                      : "text-slate-400 hover:bg-slate-800 hover:text-white"
                    }`}
                  >
                    <Icon name="Smile" className="w-5 h-5" />
                    <span className="font-medium">Saúde Bucal</span>
                  </button>
                </nav>

                <div className="p-4 bg-slate-950 text-xs text-slate-500">
                  Baseado nas Notas Técnicas 2024/2025 (C1-C7, M1-M2, B1-B6, NT30)
                </div>
              </aside>

              {/* Conteúdo Principal */}
              <main className="flex-1 overflow-y-auto h-screen">
                {/* Mobile Header */}
                <div className="md:hidden bg-slate-900 text-white p-4">
                  <div className="flex justify-between items-center mb-4">
                    <h1 className="font-bold flex items-center gap-2">
                      <Icon name="Activity" className="w-5 h-5 text-indigo-400" />
                      Gestor SUS
                    </h1>
                  </div>
                  <div className="flex gap-2 overflow-x-auto pb-2 scrollbar-hide">
                      <button 
                        onClick={() => {setActiveTab("APS"); setSearchTerm("");}} 
                        className={`px-3 py-1.5 rounded-lg text-sm whitespace-nowrap font-medium ${activeTab === "APS" ? "bg-indigo-600" : "bg-slate-800"}`}
                      >APS</button>
                      <button 
                        onClick={() => {setActiveTab("ACS"); setSearchTerm("");}} 
                        className={`px-3 py-1.5 rounded-lg text-sm whitespace-nowrap font-medium ${activeTab === "ACS" ? "bg-orange-600" : "bg-slate-800"}`}
                      >ACS</button>
                      <button 
                        onClick={() => {setActiveTab("eMulti"); setSearchTerm("");}} 
                        className={`px-3 py-1.5 rounded-lg text-sm whitespace-nowrap font-medium ${activeTab === "eMulti" ? "bg-purple-600" : "bg-slate-800"}`}
                      >eMulti</button>
                      <button 
                        onClick={() => {setActiveTab("Bucal"); setSearchTerm("");}} 
                        className={`px-3 py-1.5 rounded-lg text-sm whitespace-nowrap font-medium ${activeTab === "Bucal" ? "bg-teal-600" : "bg-slate-800"}`}
                      >S. Bucal</button>
                  </div>
                </div>

                <div className="p-6 md:p-10 max-w-6xl mx-auto">
                  
                  <div className="mb-8">
                    <h2 className="text-3xl font-bold text-slate-900 flex items-center gap-3">
                        {headerTitle}
                    </h2>
                    <p className="text-slate-500 mt-1">
                        {headerSubtitle}
                    </p>
                  </div>

                  {/* --- NOVA BARRA DE BUSCA E FILTROS --- */}
                  <div className="flex flex-col md:flex-row justify-between items-start md:items-end gap-4 w-full mb-6">
                    
                    {/* Campo de Busca */}
                    <div className="relative w-full md:w-72">
                        <span className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <Icon name="Search" className="h-4 w-4 text-slate-400" />
                        </span>
                        <input
                        type="text"
                        placeholder="Buscar (ex: Pressão, C1...)"
                        value={searchTerm}
                        onChange={(e) => setSearchTerm(e.target.value)}
                        className="block w-full pl-10 pr-3 py-2 border border-slate-300 rounded-lg leading-5 bg-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm transition duration-150 ease-in-out shadow-sm"
                        />
                    </div>

                    {/* Filtros de Categoria */}
                    <div className="flex gap-2 overflow-x-auto pb-2 max-w-full scrollbar-hide">
                        {categories.map(cat => (
                        <button
                            key={cat}
                            onClick={() => setSelectedCategory(cat)}
                            className={`px-4 py-2 rounded-full text-xs font-bold whitespace-nowrap transition-colors border ${
                            selectedCategory === cat 
                                ? "bg-indigo-100 text-indigo-700 border-indigo-200" 
                                : "bg-white text-slate-600 border-slate-200 hover:bg-slate-50"
                            }`}
                        >
                            {cat}
                        </button>
                        ))}
                    </div>
                  </div>
                  
                  {/* Grid de Cards */}
                  <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    {filteredIndicators.map((indicator) => (
                      <div 
                        key={indicator.id}
                        className="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden hover:shadow-md transition-all duration-300 group"
                      >
                        {/* Header do Card */}
                        <div className="p-6 border-b border-slate-100 bg-slate-50/50">
                          <div className="flex justify-between items-start mb-3">
                            <div className="flex items-center gap-3">
                              <span className={`w-10 h-10 rounded-lg flex items-center justify-center ${headerColorClass}`}>
                                <Icon name={indicator.iconName || "Target"} className="w-6 h-6" />
                              </span>
                              <div>
                                <span className="text-xs font-bold text-slate-400 uppercase tracking-wider">
                                  {indicator.code}
                                </span>
                                <h3 className="text-xl font-bold text-slate-800 leading-tight">
                                  {indicator.title}
                                </h3>
                              </div>
                            </div>
                            <div className="bg-white px-3 py-1 rounded-full border border-emerald-100 shadow-sm flex flex-col items-end">
                               <span className="text-[10px] text-slate-400 font-bold uppercase">Meta / Peso</span>
                               <span className="text-lg font-black text-emerald-600 whitespace-nowrap">{indicator.targetDescription}</span>
                            </div>
                          </div>
                          <p className="text-slate-600 text-sm leading-relaxed">
                            {indicator.description}
                          </p>
                        </div>

                        {/* Seção de Especificações Técnicas (Disponível para todos) */}
                        {indicator.technicalDetails && (
                          <div className="bg-slate-50/80 p-5 border-b border-slate-100">
                            <div className="flex items-center gap-2 mb-3">
                              <Icon name="Briefcase" className="w-4 h-4 text-indigo-600" />
                              <h4 className="text-sm font-bold text-slate-700 uppercase tracking-wide">Especificações Técnicas</h4>
                            </div>
                            
                            <div className="space-y-4">
                              {/* Procedimentos */}
                              <div>
                                 <div className="flex items-center gap-2 text-xs font-bold text-slate-500 uppercase mb-1">
                                   <Icon name="Sticker" className="w-3 h-3" /> Procedimentos / Códigos
                                 </div>
                                 <ul className="list-disc list-inside text-sm text-slate-600 pl-1 space-y-1">
                                   {indicator.technicalDetails.procedures.map((proc, idx) => (
                                     <li key={idx}>{proc}</li>
                                   ))}
                                 </ul>
                              </div>

                              {/* CBOs */}
                              <div>
                                 <div className="flex items-center gap-2 text-xs font-bold text-slate-500 uppercase mb-1">
                                   <Icon name="Users" className="w-3 h-3" /> Quem pode registrar (CBO)
                                 </div>
                                 <div className="flex flex-wrap gap-1">
                                   {indicator.technicalDetails.cbos.map((cbo, idx) => (
                                     <span key={idx} className="text-[10px] bg-white border border-slate-200 px-2 py-1 rounded text-slate-600">
                                       {cbo}
                                     </span>
                                   ))}
                                 </div>
                              </div>

                               {/* Fichas */}
                               <div>
                                 <div className="flex items-center gap-2 text-xs font-bold text-slate-500 uppercase mb-1">
                                   <Icon name="FileSpreadsheet" className="w-3 h-3" /> Fichas / Sistemas
                                 </div>
                                 <ul className="list-disc list-inside text-sm text-slate-600 pl-1 space-y-1">
                                   {indicator.technicalDetails.forms.map((form, idx) => (
                                     <li key={idx}>{form}</li>
                                   ))}
                                 </ul>
                              </div>
                            </div>
                          </div>
                        )}

                        {/* Lista de Requisitos (Boas Práticas) */}
                        <div className="p-6 bg-white">
                          <div className="flex items-center gap-2 mb-4">
                            <Icon name="ListChecks" className="w-4 h-4 text-indigo-500" />
                            <h4 className="text-sm font-bold text-slate-700 uppercase tracking-wide">
                              Regras & Requisitos
                            </h4>
                          </div>
                          
                          <ul className="space-y-3">
                            {indicator.requirements.map((req, idx) => (
                              <li key={idx} className="flex gap-3 text-sm group-hover:bg-slate-50 p-2 rounded-lg transition-colors">
                                <Icon name="CheckCircle2" className="w-5 h-5 text-emerald-500 flex-shrink-0 mt-0.5" />
                                <div>
                                  <span className="font-semibold text-slate-800 mr-1">
                                    {req.title}:
                                  </span>
                                  <span className="text-slate-600">
                                    {req.text}
                                  </span>
                                </div>
                              </li>
                            ))}
                          </ul>
                        </div>

                      </div>
                    ))}
                  </div>
                  
                  <div className="mt-10 text-center text-slate-400 text-sm pb-10">
                    <p>Sistema atualizado com as Notas Técnicas 2024/2025 - Ministério da Saúde</p>
                  </div>

                </div>
              </main>
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

